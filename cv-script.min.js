let satelliteAnimationId=null,drawSatellite=null;const navButtons=document.querySelectorAll(".nav-btn"),sections=document.querySelectorAll(".section");navButtons.forEach(t=>{t.addEventListener("click",()=>{const i=t.dataset.section;navButtons.forEach(n=>n.classList.remove("active")),t.classList.add("active"),sections.forEach(n=>n.classList.remove("active")),document.getElementById(i).classList.add("active"),i==="satellite"?setTimeout(()=>{window.startSatelliteAnimation?window.startSatelliteAnimation():drawSatellite&&drawSatellite()},150):window.stopSatelliteAnimation&&window.stopSatelliteAnimation()})});const filterButtons=document.querySelectorAll(".filter-btn"),timelineItems=document.querySelectorAll(".timeline-item");filterButtons.forEach(t=>{t.addEventListener("click",()=>{filterButtons.forEach(a=>a.classList.remove("active")),t.classList.add("active");const i=t.dataset.filter;timelineItems.forEach(a=>{const n=a.dataset.category;i==="all"||n.includes(i)?(a.style.display="block",setTimeout(()=>a.style.opacity="1",10)):(a.style.opacity="0",setTimeout(()=>a.style.display="none",300))})})});const radarCanvas=document.getElementById("radarCanvas"),radarCtx=radarCanvas.getContext("2d");function resizeCanvas(t){const i=t.parentElement.getBoundingClientRect(),a=Math.max(i.width||600,400),n=Math.max(i.height||600,400);t.width=a,t.height=n}resizeCanvas(radarCanvas),window.addEventListener("resize",()=>resizeCanvas(radarCanvas));let radarAngle=0;const careerPoints=[{angle:45,distance:.3,label:"Research (U.Ark)",color:"#00ff41"},{angle:90,distance:.5,label:"Research (BYU)",color:"#00d4ff"},{angle:180,distance:.4,label:"Operations",color:"#ffaa00"},{angle:270,distance:.6,label:"Quality",color:"#00ff41"},{angle:315,distance:.7,label:"Support",color:"#00d4ff"}];function drawRadar(){resizeCanvas(radarCanvas),(radarCanvas.width===0||radarCanvas.height===0)&&(radarCanvas.width=600,radarCanvas.height=600);const t={x:radarCanvas.width/2,y:radarCanvas.height/2},i=Math.min(radarCanvas.width,radarCanvas.height)/2-20,a=Math.max(i,50);radarCtx.clearRect(0,0,radarCanvas.width,radarCanvas.height);for(let e=1;e<=5;e++){const o=a/5*e;o>0&&(radarCtx.strokeStyle="rgba(0, 255, 65, 0.3)",radarCtx.lineWidth=1,radarCtx.beginPath(),radarCtx.arc(t.x,t.y,o,0,Math.PI*2),radarCtx.stroke())}for(let e=0;e<8;e++){const o=Math.PI*2*e/8;radarCtx.strokeStyle="rgba(0, 255, 65, 0.2)",radarCtx.lineWidth=1,radarCtx.beginPath(),radarCtx.moveTo(t.x,t.y),radarCtx.lineTo(t.x+Math.cos(o)*a,t.y+Math.sin(o)*a),radarCtx.stroke()}careerPoints.forEach(e=>{const o=t.x+Math.cos(e.angle*Math.PI/180)*a*e.distance,r=t.y+Math.sin(e.angle*Math.PI/180)*a*e.distance,c=radarCtx.createRadialGradient(o,r,0,o,r,15);c.addColorStop(0,e.color),c.addColorStop(1,"transparent"),radarCtx.fillStyle=c,radarCtx.fillRect(o-15,r-15,30,30),radarCtx.fillStyle=e.color,radarCtx.beginPath(),radarCtx.arc(o,r,5,0,Math.PI*2),radarCtx.fill(),radarCtx.fillStyle="#e0f2fe",radarCtx.font="12px Orbitron",radarCtx.fillText(e.label,o+10,r-10)}),radarAngle+=.02;const n=radarAngle;if(radarCtx.strokeStyle="rgba(0, 255, 65, 0.8)",radarCtx.lineWidth=2,radarCtx.beginPath(),radarCtx.moveTo(t.x,t.y),radarCtx.lineTo(t.x+Math.cos(n)*a,t.y+Math.sin(n)*a),radarCtx.stroke(),a>0){const e=radarCtx.createLinearGradient(t.x,t.y,t.x+Math.cos(n)*a,t.y+Math.sin(n)*a);e.addColorStop(0,"rgba(0, 255, 65, 0.3)"),e.addColorStop(1,"transparent"),radarCtx.fillStyle=e,radarCtx.beginPath(),radarCtx.moveTo(t.x,t.y),radarCtx.arc(t.x,t.y,a,n-.1,n+.1),radarCtx.closePath(),radarCtx.fill()}requestAnimationFrame(drawRadar)}drawRadar();const satelliteCanvas=document.getElementById("satelliteCanvas"),satelliteCtx=satelliteCanvas.getContext("2d");let satelliteAngle=0;function resizeSatelliteCanvas(){const t=satelliteCanvas.parentElement.getBoundingClientRect(),i=Math.max(t.width||800,400),a=Math.max(t.height||400,300);satelliteCanvas.width=i,satelliteCanvas.height=a}resizeSatelliteCanvas();function drawInitialFrame(){(satelliteCanvas.width===0||satelliteCanvas.height===0)&&(satelliteCanvas.width=800,satelliteCanvas.height=400);const t={x:satelliteCanvas.width/2,y:satelliteCanvas.height/2},i=Math.min(satelliteCanvas.width,satelliteCanvas.height)/3,a=Math.min(80,i*.3);satelliteCtx.clearRect(0,0,satelliteCanvas.width,satelliteCanvas.height);const n=satelliteCtx.createRadialGradient(t.x,t.y,0,t.x,t.y,a);n.addColorStop(0,"#2a5a6c"),n.addColorStop(.5,"#1a4a5c"),n.addColorStop(1,"#0a2e3a"),satelliteCtx.fillStyle=n,satelliteCtx.beginPath(),satelliteCtx.arc(t.x,t.y,a,0,Math.PI*2),satelliteCtx.fill(),satelliteCtx.strokeStyle="rgba(0, 255, 65, 0.4)",satelliteCtx.lineWidth=2,satelliteCtx.setLineDash([8,8]),satelliteCtx.beginPath(),satelliteCtx.ellipse(t.x,t.y,i,i*.6,0,0,Math.PI*2),satelliteCtx.stroke(),satelliteCtx.setLineDash([])}drawInitialFrame(),drawSatellite=function(){resizeSatelliteCanvas(),(satelliteCanvas.width===0||satelliteCanvas.height===0)&&(satelliteCanvas.width=800,satelliteCanvas.height=400);const t={x:satelliteCanvas.width/2,y:satelliteCanvas.height/2},i=Math.min(satelliteCanvas.width,satelliteCanvas.height)/3,a=Math.min(80,i*.3);satelliteCtx.clearRect(0,0,satelliteCanvas.width,satelliteCanvas.height);const n=satelliteCtx.createRadialGradient(t.x,t.y,0,t.x,t.y,a);n.addColorStop(0,"#2a5a6c"),n.addColorStop(.5,"#1a4a5c"),n.addColorStop(1,"#0a2e3a"),satelliteCtx.fillStyle=n,satelliteCtx.beginPath(),satelliteCtx.arc(t.x,t.y,a,0,Math.PI*2),satelliteCtx.fill(),satelliteCtx.strokeStyle="rgba(0, 212, 255, 0.3)",satelliteCtx.lineWidth=1,satelliteCtx.beginPath(),satelliteCtx.arc(t.x,t.y,a,0,Math.PI*2),satelliteCtx.stroke(),satelliteCtx.strokeStyle="rgba(0, 255, 65, 0.4)",satelliteCtx.lineWidth=2,satelliteCtx.setLineDash([8,8]),satelliteCtx.beginPath(),satelliteCtx.ellipse(t.x,t.y,i,i*.6,0,0,Math.PI*2),satelliteCtx.stroke(),satelliteCtx.setLineDash([]),satelliteAngle+=.01;const e=t.x+Math.cos(satelliteAngle)*i,o=t.y+Math.sin(satelliteAngle)*i*.6,r=.3+Math.sin(satelliteAngle*3)*.2;satelliteCtx.strokeStyle=`rgba(0, 212, 255, ${r})`,satelliteCtx.lineWidth=2,satelliteCtx.beginPath(),satelliteCtx.moveTo(t.x,t.y),satelliteCtx.lineTo(e,o),satelliteCtx.stroke();const c=satelliteCtx.createLinearGradient(t.x,t.y,e,o);c.addColorStop(0,"rgba(0, 212, 255, 0.1)"),c.addColorStop(.5,"rgba(0, 212, 255, 0.3)"),c.addColorStop(1,"rgba(0, 212, 255, 0.1)"),satelliteCtx.strokeStyle=c,satelliteCtx.lineWidth=4,satelliteCtx.beginPath(),satelliteCtx.moveTo(t.x,t.y),satelliteCtx.lineTo(e,o),satelliteCtx.stroke();const d=satelliteCtx.createRadialGradient(e,o,0,e,o,25);d.addColorStop(0,"rgba(0, 212, 255, 0.8)"),d.addColorStop(.5,"rgba(0, 212, 255, 0.3)"),d.addColorStop(1,"transparent"),satelliteCtx.fillStyle=d,satelliteCtx.fillRect(e-25,o-25,50,50),satelliteCtx.fillStyle="#00d4ff",satelliteCtx.fillRect(e-10,o-5,20,10),satelliteCtx.fillStyle="#00aacc",satelliteCtx.fillRect(e-15,o-3,30,6),satelliteCtx.fillStyle="#00ff41",satelliteCtx.fillRect(e-2,o-2,4,4);const h=Date.now()*.001;for(let s=1;s<=4;s++){const g=20+s*15+Math.sin(h*2)*5,y=.6/s*(.5+Math.sin(h*3)*.5);satelliteCtx.strokeStyle=`rgba(0, 255, 65, ${y})`,satelliteCtx.lineWidth=2,satelliteCtx.beginPath(),satelliteCtx.arc(e,o,g,0,Math.PI*2),satelliteCtx.stroke()}const l=20;for(let s=0;s<l;s++){const g=satelliteAngle-s*.05,y=t.x+Math.cos(g)*i,m=t.y+Math.sin(g)*i*.6,w=(l-s)/l*.3;satelliteCtx.fillStyle=`rgba(0, 212, 255, ${w})`,satelliteCtx.beginPath(),satelliteCtx.arc(y,m,2,0,Math.PI*2),satelliteCtx.fill()}const f=document.getElementById("satellite");f&&f.classList.contains("active")&&(satelliteAnimationId=requestAnimationFrame(drawSatellite))},window.startSatelliteAnimation=function(){satelliteAnimationId||(resizeSatelliteCanvas(),drawSatellite())},window.stopSatelliteAnimation=function(){satelliteAnimationId&&(cancelAnimationFrame(satelliteAnimationId),satelliteAnimationId=null)},window.addEventListener("resize",()=>{resizeSatelliteCanvas(),satelliteAnimationId&&drawSatellite()});const satelliteSection=document.getElementById("satellite");satelliteSection&&(new MutationObserver(i=>{i.forEach(a=>{a.type==="attributes"&&a.attributeName==="class"&&(satelliteSection.classList.contains("active")?setTimeout(()=>{window.startSatelliteAnimation&&window.startSatelliteAnimation()},50):window.stopSatelliteAnimation&&window.stopSatelliteAnimation())})}).observe(satelliteSection,{attributes:!0,attributeFilter:["class"]}),satelliteSection.classList.contains("active")&&setTimeout(()=>{window.startSatelliteAnimation&&window.startSatelliteAnimation()},100));function drawSignal(t,i=1,a=1){const n=document.getElementById(t),e=n.getContext("2d");function o(){const d=n.parentElement.getBoundingClientRect();n.width=d.width,n.height=d.height}o(),window.addEventListener("resize",o);let r=0;function c(){e.clearRect(0,0,n.width,n.height),e.strokeStyle="#00ff41",e.lineWidth=2,e.beginPath();const d=n.height/2,h=n.width;for(let l=0;l<h;l++){const f=l/h*Math.PI*4+r,s=d+Math.sin(f*i)*a*30;l===0?e.moveTo(l,s):e.lineTo(l,s)}e.stroke(),e.strokeStyle="#00d4ff",e.lineWidth=1,e.beginPath();for(let l=0;l<h;l++){const f=l/h*Math.PI*8+r*2,s=d+Math.sin(f*i*2)*a*15;l===0?e.moveTo(l,s):e.lineTo(l,s)}e.stroke(),r+=.05,requestAnimationFrame(c)}c()}drawSignal("overviewSignal",1,1),drawSignal("skillsSignal",1.5,.8);const observerOptions={threshold:.1,rootMargin:"0px"},observer=new IntersectionObserver(t=>{t.forEach(i=>{i.isIntersecting&&(i.target.style.opacity="1",i.target.style.transform="translateY(0)")})},observerOptions);document.querySelectorAll(".card, .stat-card").forEach(t=>{t.style.opacity="0",t.style.transform="translateY(20px)",t.style.transition="opacity 0.5s, transform 0.5s",observer.observe(t)});
